\documentclass{article}
\usepackage{../../apxproof}
\newtheoremrep{foobar}{FooBar}
\usepackage{amsmath}
\usepackage{etoolbox}
\begin{document}

\begin{foobarrep}
  \begin{equation}
    \label{testeq}
    some~equation
  \end{equation}
\end{foobarrep}

We expect \verb|\ref{testeq}| to point Eq.~(1) on page~1.

It does point to Eq.~(\ref{testeq}) on page~\pageref{testeq}.

\makeatletter
\newif\iftesterror
\def\teststring#1#2{%
  \edef\teststring@a{{#1}}%
  \edef\teststring@b{{#2}}%
  {
    \ttfamily
    \par -- Beggining test (a) == (b)
    \par ---- (a) (\expandafter\detokenize\expandafter{\teststring@a})
    \par ---- (b) (\expandafter\detokenize\expandafter{\teststring@b})
    \ifx\teststring@a\teststring@b
      \par -- SUCCESS
    \else
      \par -- FAILED
      \global\testerrortrue
    \fi
    \par -----------------------------------------------------
  }
}

\ifcsname r@testeq\endcsname
  \teststring{Eq.\expandafter\@firstoftwo\r@testeq{}}{Eq.1{}}
  \teststring{Page \expandafter\@secondoftwo\r@testeq{}}{Page 1{}}
\fi

\clearpage empty page
\clearpage empty page

\iftesterror
  \errmessage{Some test has failed (see output pdf).}
\fi

\end{document}
